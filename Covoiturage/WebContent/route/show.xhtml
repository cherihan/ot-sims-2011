<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:ui="http://java.sun.com/jsf/facelets">
      

	<ui:composition template="/template/template.xhtml">
	
	
		<ui:define name="title">
			<h:outputText value="Trajet #{route.Position_begin} > #{route.Position_end}" /> 
		</ui:define>
		
		<ui:define name="body">
			<div>
				<h:outputText value="De : #{route.Position_begin}" /><br/>
				<h:outputText value="A : #{route.Position_end}" /><br/>
				<h:outputText value="Départ dans"/>
				<script> 
					var now = new Date();
					var df = (now.gettime()-route.date_begin.gettime())/60000;

					if (df/(60*24) >= 2){
						document.write(df/(60*24) + " jours");
					}else if (df/(60*24) >= 1)
						document.write("1 jour");
					}

					df = df%(60*24);
					
					if (df/60 >= 2){
						document.write(df/60 + " heures");
					}else if (df/60 >= 1){
						document.write("1 heure");
					}

					df = df%60;
					
					if (df >= 2){
						document.write(df + " minutes");
					}else if (df >= 1){
						document.write("1 minute");
					}
				</script>
			</div>
			
			<hr/>
			
			<div>
				<h:outputLabel value="Conducteur : " /><br/>
				<h:commandButton action="#{}" value="#{route.Route_owner}" styleClass="large" /><br/>
				<h:outputLabel value="Passager : (#{route.getTotalSeatNumber} places, #{route.seat} dispo.)" />
				<ui:repeat value="#{route.getPassagers.elements}" var="passager">
                	<li> 
                     	 <h:commandButton action="#{}" value="#{passager.getUserObj.Firstname} #{passager.getUserObj.Lastname}" styleClass="large" />
                	</li> 
         		 </ui:repeat>
				<h:commandButton action="#{}" value="Se joindre au trajet" styleClass="large" />
			</div>
			
			<hr/>
			
			<div>
				<h:outputLabel value="Détails du trajet :" />
				<h:outputText value="#{route.Comment}" /><br/>
			</div>
			
			<div>
				<h:commandButton action="#{}" value="Autres trajets" styleClass="large" />
			</div>
			
		</ui:define>
		
	</ui:composition>

	
</html>